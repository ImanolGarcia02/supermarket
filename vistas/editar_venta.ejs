<%- include('header') %>

<div class="text-center mb-3">
  <img src="https://cdn-icons-png.flaticon.com/512/2280/2280532.png" alt="Editar venta" style="width: 70px;">
</div>

<div class="row">
  <div class="col-md-6">
    <h2 class="mb-4">Corregir Venta</h2>
    <form action="/ventas/<%= venta._id %>?_method=PUT" method="POST">
      
        <label for="productoId" class="form-label">Item:</label>
        <select id="productoId" name="productoId" class="form-select" required>
          <% productos.forEach(producto => { %>
            <option value="<%= producto._id %>" <%= venta.productoId._id.equals(producto._id) ? 'selected' : '' %>>
              <%= producto.nombre %> - <%= producto.precio.toFixed(2) %>
            </option>
          <% }); %>
        </select>
      
      <br>
      
        <label for="cliente" class="form-label">Comprador:</label>
        <input type="text" id="cliente" name="cliente" class="form-control" value="<%= venta.cliente %>" required>
      
      <br>
      
        <label for="cantidad" class="form-label">Cu√°ntos:</label>
        <input type="number" id="cantidad" name="cantidad" class="form-control" value="<%= venta.cantidad %>" required min="1">
      
      <br>
      
        <label for="fechaVenta" class="form-label">Fecha:</label>
        <input type="date" id="fechaVenta" name="fechaVenta" class="form-control" value="<%= venta.fechaVenta.toISOString().split('T')[0] %>" required>
      
      <br>
      
        <label for="total" class="form-label">Total:</label>
        <input type="number" id="total" name="total" class="form-control" step="0.01" value="<%= venta.total %>" required>
      
      <br>
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">Actualizar</button>
        <a href="/ventas" class="btn btn-secondary">Cancelar</a>
      </div>
    </form>
  </div>
</div>

